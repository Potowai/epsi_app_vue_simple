<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <title>Linkedin CV Maker with Vue</title>
</head>
<body>
    <div id="app" v-cloak>
        <h1>Linkedin CV Maker with Vue</h1>
        <form @submit.prevent="fetchData">
            UserId : <input type="text" placeholder="Veuillez entrer votre id :" v-model="userId"/>
            <button type="submit">Rechercher</button>
        </form>

        <table class="table">
            <thead>
                <th>NOM</th>
                <th>PRENOM</th>
                <th>AGE</th>
            </thead>
            <tbody>
                <tr v-if="Object.keys(userData).length === 0">
                    <td colspan="3">Aucune donn√©e</td>
                </tr>
                <tr v-else>
                    <td>{{ userData.lastName }}</td>
                    <td>{{ userData.firstName }}</td>
                    <td>{{ userData.age }}</td>
                </tr>
            </tbody>
        </table>
    </div>
    <script type="text/javascript" src="http://platform.linkedin.com/in.js">
        api_key: "AQXOaHG3pcxZBZaWaco3aBoHMwGU4AJROw9rAQHTxEwCwXz1veDGXnZOQA9n42s9QhE7KEHe0tEB4l-kbqCJerNQM8nuc6NaimMYLhQ35k7Bb89zQ4eiYsLZE3TyrLWIOePipAwNqK5RIU-Hlij7LeVo8AQ_J-82gHstjUPd-geW5BxG0lZAIFor7IVR6GSEG6KD9Jn6NiQ9g4b-0mGs09iHeS8ouTEZigPIH9yCKN7gpOUD9be95DyNERnGOHLwB4QksxlNrbY9KuvI7M_HbvKTF9-W-tsD8h4Ok12_IeRC70M-ShQaf9xMdMI_GzpqPczuWjBO_yufDZwRWJXCCaq-t1MGhA";
        authorize: true
      </script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="https://unpkg.com/vue@3"></script>
    <script>
        const apiURL = "https://api.linkedin.com/v2/people/";
        Vue.createApp({
            data() {
                return {
                    userId: "alexis-fiolleau-b37181221",
                    userData: {}
                };
            },
            methods: {
                async fetchData() {
                    try {
                        const response = await axios.get(apiURL + this.userId);
                        console.log(response.data);
                        this.userData = response.data;
                    } catch (error) {
                        console.log("Appel API en erreur");
                        console.error(error);
                    }
                },
            },
        }).mount("#app");
    </script>
</body>
</html>
